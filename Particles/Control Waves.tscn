[gd_scene load_steps=125 format=2]

[ext_resource path="res://Assets/Particles/Control Wave/0002.png" type="Texture" id=1]
[ext_resource path="res://Assets/Particles/Control Wave/0000.png" type="Texture" id=2]
[ext_resource path="res://Assets/Particles/Control Wave/0003.png" type="Texture" id=3]
[ext_resource path="res://Assets/Particles/Control Wave/0001.png" type="Texture" id=4]
[ext_resource path="res://Assets/Particles/Control Wave/0004.png" type="Texture" id=5]
[ext_resource path="res://Assets/Particles/Control Wave/0005.png" type="Texture" id=6]
[ext_resource path="res://Assets/Particles/Control Wave/0006.png" type="Texture" id=7]
[ext_resource path="res://Assets/Particles/Control Wave/0007.png" type="Texture" id=8]
[ext_resource path="res://Assets/Particles/Control Wave/0008.png" type="Texture" id=9]
[ext_resource path="res://Assets/Particles/Control Wave/0009.png" type="Texture" id=10]
[ext_resource path="res://Assets/Particles/Control Wave/0010.png" type="Texture" id=11]
[ext_resource path="res://Assets/Particles/Control Wave/0011.png" type="Texture" id=12]
[ext_resource path="res://Assets/Particles/Control Wave/0039.png" type="Texture" id=13]
[ext_resource path="res://Assets/Particles/Control Wave/0020.png" type="Texture" id=14]
[ext_resource path="res://Assets/Particles/Control Wave/0025.png" type="Texture" id=15]
[ext_resource path="res://Assets/Particles/Control Wave/0022.png" type="Texture" id=16]
[ext_resource path="res://Assets/Particles/Control Wave/0033.png" type="Texture" id=17]
[ext_resource path="res://Assets/Particles/Control Wave/0015.png" type="Texture" id=18]
[ext_resource path="res://Assets/Particles/Control Wave/0035.png" type="Texture" id=19]
[ext_resource path="res://Assets/Particles/Control Wave/0038.png" type="Texture" id=20]
[ext_resource path="res://Assets/Particles/Control Wave/0040.png" type="Texture" id=21]
[ext_resource path="res://Assets/Particles/Control Wave/0043.png" type="Texture" id=22]
[ext_resource path="res://Assets/Particles/Control Wave/0037.png" type="Texture" id=23]
[ext_resource path="res://Assets/Particles/Control Wave/0016.png" type="Texture" id=24]
[ext_resource path="res://Assets/Particles/Control Wave/0036.png" type="Texture" id=25]
[ext_resource path="res://Assets/Particles/Control Wave/0041.png" type="Texture" id=26]
[ext_resource path="res://Assets/Particles/Control Wave/0021.png" type="Texture" id=27]
[ext_resource path="res://Assets/Particles/Control Wave/0044.png" type="Texture" id=28]
[ext_resource path="res://Assets/Particles/Control Wave/0013.png" type="Texture" id=29]
[ext_resource path="res://Assets/Particles/Control Wave/0026.png" type="Texture" id=30]
[ext_resource path="res://Assets/Particles/Control Wave/0027.png" type="Texture" id=31]
[ext_resource path="res://Assets/Particles/Control Wave/0030.png" type="Texture" id=32]
[ext_resource path="res://Assets/Particles/Control Wave/0023.png" type="Texture" id=33]
[ext_resource path="res://Assets/Particles/Control Wave/0019.png" type="Texture" id=34]
[ext_resource path="res://Assets/Particles/Control Wave/0032.png" type="Texture" id=35]
[ext_resource path="res://Assets/Particles/Control Wave/0046.png" type="Texture" id=36]
[ext_resource path="res://Assets/Particles/Control Wave/0018.png" type="Texture" id=37]
[ext_resource path="res://Assets/Particles/Control Wave/0024.png" type="Texture" id=38]
[ext_resource path="res://Assets/Particles/Control Wave/0042.png" type="Texture" id=39]
[ext_resource path="res://Assets/Particles/Control Wave/0045.png" type="Texture" id=40]
[ext_resource path="res://Assets/Particles/Control Wave/0029.png" type="Texture" id=41]
[ext_resource path="res://Assets/Particles/Control Wave/0017.png" type="Texture" id=42]
[ext_resource path="res://Assets/Particles/Control Wave/0031.png" type="Texture" id=43]
[ext_resource path="res://Assets/Particles/Control Wave/0028.png" type="Texture" id=44]
[ext_resource path="res://Assets/Particles/Control Wave/0034.png" type="Texture" id=45]
[ext_resource path="res://Assets/Particles/Control Wave/0012.png" type="Texture" id=46]
[ext_resource path="res://Assets/Particles/Control Wave/0014.png" type="Texture" id=47]
[ext_resource path="res://Assets/Particles/Control Wave/0051.png" type="Texture" id=48]
[ext_resource path="res://Assets/Particles/Control Wave/0056.png" type="Texture" id=49]
[ext_resource path="res://Assets/Particles/Control Wave/0048.png" type="Texture" id=50]
[ext_resource path="res://Assets/Particles/Control Wave/0054.png" type="Texture" id=51]
[ext_resource path="res://Assets/Particles/Control Wave/0057.png" type="Texture" id=52]
[ext_resource path="res://Assets/Particles/Control Wave/0052.png" type="Texture" id=53]
[ext_resource path="res://Assets/Particles/Control Wave/0049.png" type="Texture" id=54]
[ext_resource path="res://Assets/Particles/Control Wave/0050.png" type="Texture" id=55]
[ext_resource path="res://Assets/Particles/Control Wave/0058.png" type="Texture" id=56]
[ext_resource path="res://Assets/Particles/Control Wave/0053.png" type="Texture" id=57]
[ext_resource path="res://Assets/Particles/Control Wave/0055.png" type="Texture" id=58]
[ext_resource path="res://Assets/Particles/Control Wave/Alien Noise.png" type="Texture" id=59]
[ext_resource path="res://Assets/Particles/Control Wave/0047.png" type="Texture" id=60]
[ext_resource path="res://Particles/Control Waves.gd" type="Script" id=61]
[ext_resource path="res://Assets/Particles/Controled Wave/0038.png" type="Texture" id=62]
[ext_resource path="res://Assets/Particles/Controled Wave/0057.png" type="Texture" id=63]
[ext_resource path="res://Assets/Particles/Controled Wave/0041.png" type="Texture" id=64]
[ext_resource path="res://Assets/Particles/Controled Wave/0056.png" type="Texture" id=65]
[ext_resource path="res://Assets/Particles/Controled Wave/0050.png" type="Texture" id=66]
[ext_resource path="res://Assets/Particles/Controled Wave/0040.png" type="Texture" id=67]
[ext_resource path="res://Assets/Particles/Controled Wave/0047.png" type="Texture" id=68]
[ext_resource path="res://Assets/Particles/Controled Wave/0054.png" type="Texture" id=69]
[ext_resource path="res://Assets/Particles/Controled Wave/0053.png" type="Texture" id=70]
[ext_resource path="res://Assets/Particles/Controled Wave/0043.png" type="Texture" id=71]
[ext_resource path="res://Assets/Particles/Controled Wave/0058.png" type="Texture" id=72]
[ext_resource path="res://Assets/Particles/Controled Wave/0045.png" type="Texture" id=73]
[ext_resource path="res://Assets/Particles/Controled Wave/0042.png" type="Texture" id=74]
[ext_resource path="res://Assets/Particles/Controled Wave/0044.png" type="Texture" id=75]
[ext_resource path="res://Assets/Particles/Controled Wave/0055.png" type="Texture" id=76]
[ext_resource path="res://Assets/Particles/Controled Wave/0049.png" type="Texture" id=77]
[ext_resource path="res://Assets/Particles/Controled Wave/0051.png" type="Texture" id=78]
[ext_resource path="res://Assets/Particles/Controled Wave/0039.png" type="Texture" id=79]
[ext_resource path="res://Assets/Particles/Controled Wave/0048.png" type="Texture" id=80]
[ext_resource path="res://Assets/Particles/Controled Wave/0052.png" type="Texture" id=81]
[ext_resource path="res://Assets/Particles/Controled Wave/0046.png" type="Texture" id=82]
[ext_resource path="res://Assets/Particles/Controled Wave/0019.png" type="Texture" id=83]
[ext_resource path="res://Assets/Particles/Controled Wave/0023.png" type="Texture" id=84]
[ext_resource path="res://Assets/Particles/Controled Wave/0030.png" type="Texture" id=85]
[ext_resource path="res://Assets/Particles/Controled Wave/0006.png" type="Texture" id=86]
[ext_resource path="res://Assets/Particles/Controled Wave/0005.png" type="Texture" id=87]
[ext_resource path="res://Assets/Particles/Controled Wave/0014.png" type="Texture" id=88]
[ext_resource path="res://Assets/Particles/Controled Wave/0000.png" type="Texture" id=89]
[ext_resource path="res://Assets/Particles/Controled Wave/0021.png" type="Texture" id=90]
[ext_resource path="res://Assets/Particles/Controled Wave/0018.png" type="Texture" id=91]
[ext_resource path="res://Assets/Particles/Controled Wave/0024.png" type="Texture" id=92]
[ext_resource path="res://Assets/Particles/Controled Wave/0028.png" type="Texture" id=93]
[ext_resource path="res://Assets/Particles/Controled Wave/0007.png" type="Texture" id=94]
[ext_resource path="res://Assets/Particles/Controled Wave/0010.png" type="Texture" id=95]
[ext_resource path="res://Assets/Particles/Controled Wave/0008.png" type="Texture" id=96]
[ext_resource path="res://Assets/Particles/Controled Wave/0002.png" type="Texture" id=97]
[ext_resource path="res://Assets/Particles/Controled Wave/0017.png" type="Texture" id=98]
[ext_resource path="res://Assets/Particles/Controled Wave/0003.png" type="Texture" id=99]
[ext_resource path="res://Assets/Particles/Controled Wave/0015.png" type="Texture" id=100]
[ext_resource path="res://Assets/Particles/Controled Wave/0016.png" type="Texture" id=101]
[ext_resource path="res://Assets/Particles/Controled Wave/0001.png" type="Texture" id=102]
[ext_resource path="res://Assets/Particles/Controled Wave/0004.png" type="Texture" id=103]
[ext_resource path="res://Assets/Particles/Controled Wave/0020.png" type="Texture" id=104]
[ext_resource path="res://Assets/Particles/Controled Wave/0022.png" type="Texture" id=105]
[ext_resource path="res://Assets/Particles/Controled Wave/0025.png" type="Texture" id=106]
[ext_resource path="res://Assets/Particles/Controled Wave/0026.png" type="Texture" id=107]
[ext_resource path="res://Assets/Particles/Controled Wave/0027.png" type="Texture" id=108]
[ext_resource path="res://Assets/Particles/Controled Wave/0029.png" type="Texture" id=109]
[ext_resource path="res://Assets/Particles/Controled Wave/0031.png" type="Texture" id=110]
[ext_resource path="res://Assets/Particles/Controled Wave/0011.png" type="Texture" id=111]
[ext_resource path="res://Assets/Particles/Controled Wave/0009.png" type="Texture" id=112]
[ext_resource path="res://Assets/Particles/Controled Wave/0012.png" type="Texture" id=113]
[ext_resource path="res://Assets/Particles/Controled Wave/0013.png" type="Texture" id=114]
[ext_resource path="res://Assets/Particles/Controled Wave/0035.png" type="Texture" id=115]
[ext_resource path="res://Assets/Particles/Controled Wave/0036.png" type="Texture" id=116]
[ext_resource path="res://Assets/Particles/Controled Wave/0034.png" type="Texture" id=117]
[ext_resource path="res://Assets/Particles/Controled Wave/0037.png" type="Texture" id=118]
[ext_resource path="res://Assets/Particles/Controled Wave/0033.png" type="Texture" id=119]
[ext_resource path="res://Assets/Particles/Controled Wave/0032.png" type="Texture" id=120]
[ext_resource path="res://Assets/Sfx/ufo.wav" type="AudioStream" id=121]

[sub_resource type="Shader" id=3]
code = "shader_type canvas_item;

uniform sampler2D flowMap; //Displacement map
uniform float strength;    //Force of the effect
uniform float speed;       //Speed of the effect
uniform int frames : hint_range(1, 10); //Frames of the effect

//Returns a value between 0 and 1 depending of the frames -> exemple: frames = 4, frame 1 = 0.25
float clock(float time){
	float fframes = float(frames);
	return floor(mod(time * speed, fframes)) / fframes;
}

void fragment(){
	float c = clock(TIME); //Get clock frame
	vec4 offset = texture(flowMap, vec2(UV.x + c, UV.y + c)) * strength; //Get offset 
	//COLOR = texture(TEXTURE, vec2(UV.x,UV.y) + normal.xy); //Apply offset
	COLOR = texture(TEXTURE, vec2(UV.x,UV.y) + offset.xy - vec2(0.5,0.5)*strength); //We need to remove the displacement 
}


// TEST CLOCK
/*
void fragment(){
	float c = clock(TIME);
	COLOR = vec4( c, c, c, 1);
}
*/"

[sub_resource type="ShaderMaterial" id=4]
shader = SubResource( 3 )
shader_param/strength = 0.03
shader_param/speed = 0.0
shader_param/frames = 1
shader_param/flowMap = ExtResource( 59 )

[sub_resource type="SpriteFrames" id=5]
animations = [ {
"frames": [ ExtResource( 2 ), ExtResource( 4 ), ExtResource( 1 ), ExtResource( 3 ), ExtResource( 5 ), ExtResource( 6 ), ExtResource( 7 ), ExtResource( 8 ), ExtResource( 9 ), ExtResource( 10 ), ExtResource( 11 ), ExtResource( 12 ), ExtResource( 46 ), ExtResource( 29 ), ExtResource( 47 ), ExtResource( 18 ), ExtResource( 24 ), ExtResource( 42 ), ExtResource( 37 ), ExtResource( 34 ), ExtResource( 14 ), ExtResource( 27 ), ExtResource( 16 ), ExtResource( 33 ), ExtResource( 38 ), ExtResource( 15 ), ExtResource( 30 ), ExtResource( 31 ), ExtResource( 44 ), ExtResource( 41 ), ExtResource( 32 ), ExtResource( 43 ), ExtResource( 35 ), ExtResource( 17 ), ExtResource( 45 ), ExtResource( 19 ), ExtResource( 25 ), ExtResource( 23 ), ExtResource( 20 ), ExtResource( 13 ), ExtResource( 21 ), ExtResource( 26 ), ExtResource( 39 ), ExtResource( 22 ), ExtResource( 28 ), ExtResource( 40 ), ExtResource( 36 ), ExtResource( 60 ), ExtResource( 50 ), ExtResource( 54 ), ExtResource( 55 ), ExtResource( 48 ), ExtResource( 53 ), ExtResource( 57 ), ExtResource( 51 ), ExtResource( 58 ), ExtResource( 49 ), ExtResource( 52 ), ExtResource( 56 ) ],
"loop": true,
"name": "emiting",
"speed": 24.0
}, {
"frames": [ ExtResource( 102 ), ExtResource( 89 ), ExtResource( 97 ), ExtResource( 99 ), ExtResource( 103 ), ExtResource( 87 ), ExtResource( 86 ), ExtResource( 94 ), ExtResource( 96 ), ExtResource( 112 ), ExtResource( 95 ), ExtResource( 111 ), ExtResource( 113 ), ExtResource( 114 ), ExtResource( 88 ), ExtResource( 100 ), ExtResource( 101 ), ExtResource( 98 ), ExtResource( 91 ), ExtResource( 83 ), ExtResource( 104 ), ExtResource( 90 ), ExtResource( 105 ), ExtResource( 84 ), ExtResource( 92 ), ExtResource( 106 ), ExtResource( 107 ), ExtResource( 108 ), ExtResource( 93 ), ExtResource( 109 ), ExtResource( 85 ), ExtResource( 110 ), ExtResource( 120 ), ExtResource( 119 ), ExtResource( 117 ), ExtResource( 115 ), ExtResource( 116 ), ExtResource( 118 ), ExtResource( 62 ), ExtResource( 79 ), ExtResource( 67 ), ExtResource( 64 ), ExtResource( 74 ), ExtResource( 71 ), ExtResource( 75 ), ExtResource( 73 ), ExtResource( 82 ), ExtResource( 68 ), ExtResource( 80 ), ExtResource( 77 ), ExtResource( 66 ), ExtResource( 78 ), ExtResource( 81 ), ExtResource( 70 ), ExtResource( 69 ), ExtResource( 76 ), ExtResource( 65 ), ExtResource( 63 ), ExtResource( 72 ) ],
"loop": true,
"name": "receiving",
"speed": 24.0
} ]

[node name="Control Waves" type="Node2D"]
script = ExtResource( 61 )

[node name="AnimatedSprite" type="AnimatedSprite" parent="."]
material = SubResource( 4 )
scale = Vector2( 1.5, 1.5 )
frames = SubResource( 5 )
animation = "emiting"
frame = 45
flip_h = true

[node name="AudioStreamPlayer2D" type="AudioStreamPlayer2D" parent="."]
stream = ExtResource( 121 )
volume_db = 10.0
autoplay = true
